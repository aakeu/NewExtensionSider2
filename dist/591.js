"use strict";(self.webpackChunkquicksearch_ext_sider=self.webpackChunkquicksearch_ext_sider||[]).push([[591],{2591:(n,e,r)=>{r.r(e),r.d(e,{default:()=>P});var o=r(4848),a=r(6540),t=r(5072),s=r.n(t),i=r(7825),c=r.n(i),d=r(7659),l=r.n(d),p=r(5056),u=r.n(p),h=r(540),x=r.n(h),m=r(1113),g=r.n(m),f=r(3235),b={};b.styleTagTransform=g(),b.setAttributes=u(),b.insert=l().bind(null,"head"),b.domAPI=c(),b.insertStyleElement=x(),s()(f.A,b),f.A&&f.A.locals&&f.A.locals;var w=r(1468),k=r(4534),v=r(1223),y=r(5066),j=r(9197),N=r(5867),S=r(1351),A=r(550),C=r(6973),R=r(4907),z=r(8672),F=r(6537),U=function(n,e,r,o){return new(r||(r=Promise))((function(a,t){function s(n){try{c(o.next(n))}catch(n){t(n)}}function i(n){try{c(o.throw(n))}catch(n){t(n)}}function c(n){var e;n.done?a(n.value):(e=n.value,e instanceof r?e:new r((function(n){n(e)}))).then(s,i)}c((o=o.apply(n,e||[])).next())}))};function E(){const[n,e]=(0,a.useState)(),r=(0,w.d4)((n=>n.theme.isDarkMode)),[t,s]=(0,a.useState)(),[i,c]=(0,a.useState)(!1),d=(0,a.useRef)(null),l=(0,w.wA)();function p(){chrome.windows.getCurrent((n=>{n.id&&chrome.tabs.captureVisibleTab(n.id,{format:"png"},(n=>{if(chrome.runtime.lastError)return console.error("Screenshot error:",chrome.runtime.lastError.message),void A.oR.error("Couldn't take screenshot please ty again");fetch(n).then((n=>n.blob())).then((n=>{const r=new File([n],"screenshot.png",{type:"image/png"});e(r)}))}))}))}function u(r){const o=r.target.files;if(o&&n!==o[0]){const n=15728640;if(!o[0].type.startsWith("image/"))return alert("Only image files are allowed."),void(r.value="");if(o[0].size>n)return A.oR.info("Image must be less than 15MB."),void(r.value="");e(o[0])}}return(0,a.useEffect)((()=>{n&&function(){U(this,void 0,void 0,(function*(){const{token:e}=yield(0,F.jK)();try{s("");const r=new FormData;r.append("file",n);const o=yield fetch("https://quicksearchserver-8ee1999baeab.herokuapp.com/api/gpts/ocr",{method:"POST",headers:{Authorization:`Bearer ${e}`},body:r});if(!o.ok){const n=yield o.json().catch((()=>null)),e=(null==n?void 0:n.message)||"Something went wrong. Please try again later.";throw new Error(e)}if(!o.body)throw new Error("Stream response body is null.");const a=o.body.getReader(),t=new TextDecoder("utf-8");let i="";for(;;){const{value:n,done:e}=yield a.read();if(e)break;const r=t.decode(n,{stream:!0});i+=r,s((n=>n+r))}s(i)}catch(n){let e="Something went wrong. Please try again later.";n.message.includes("Unauthenticated")||n.message.includes("401")?e="Your session has expired. Please log in again.":(n.message.includes("500")||n.message.includes("Internal Server Error"))&&(e="Something went wrong. Please try again later.")}}))}()}),[n]),(0,o.jsxs)("div",{className:"ocr-container",children:[(0,o.jsx)("h2",{children:"OCR"}),(0,o.jsxs)("div",{className:"ocr-interface",children:[(0,o.jsx)("div",{className:n?`ocr-res ${r&&"ocr-dark"}`:"ocr-req",children:n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("img",{src:URL.createObjectURL(n)}),(0,o.jsxs)("div",{className:"ocr-res-action-container",children:[(0,o.jsxs)("div",{className:"ocr-phase1",children:[(0,o.jsxs)("label",{htmlFor:"ocr-upload",className:"ocr-change-img",children:[(0,o.jsx)("input",{ref:d,type:"file",id:"ocr-upload",accept:"image/*",onChange:u}),(0,o.jsx)(v.qDo,{color:"white",size:24})]}),(0,o.jsx)("button",{onClick:p,className:"ocr-extract-text",children:(0,o.jsx)(y.T5o,{color:"#034aa6",size:24})})]}),(0,o.jsx)("button",{className:"ocr-delete",onClick:function(){e(null),d.current&&(d.current.value="")},children:(0,o.jsx)(v.WFf,{color:"#D70A0A",size:24})})]})]}):(0,o.jsxs)("div",{className:"ocr-upload-icon-container",children:[(0,o.jsxs)("label",{htmlFor:"ocr-upload",children:[(0,o.jsx)("input",{type:"file",id:"ocr-upload",accept:"image/*",onChange:u}),(0,o.jsx)("img",{src:"images/cloud-upload.svg",alt:"upload",className:"ocr-upload-icon"})]}),(0,o.jsx)("p",{children:"Click to Upload Photo"}),(0,o.jsx)("p",{className:"ocr-upload-info",children:"Please only upload files (Max size up to 15 MB)"})]})}),n?(0,o.jsxs)("div",{className:"ocr-result-container",children:[(0,o.jsx)("h2",{className:"ocr-result-header",children:"Result:"}),(0,o.jsx)("div",{className:`ocr-response-text ${r&&"ocr-dark"} remove-scrollbar`,children:t?(0,o.jsx)("textarea",{value:t,disabled:!0,className:`ocr-response remove-scrollbar ${r&&"ocr-response-dark"}`}):(0,o.jsx)("div",{className:"ocr-response-loader-container",children:(0,o.jsxs)("div",{className:"ocr-response-loader",children:[(0,o.jsx)("span",{className:`ocr-dot ${r&&"ocr-dot-dark"} ocr-animate-wave-1`}),(0,o.jsx)("span",{className:`ocr-dot ${r&&"ocr-dot-dark"} ocr-animate-wave-2`}),(0,o.jsx)("span",{className:`ocr-dot ${r&&"ocr-dot-dark"} ocr-animate-wave-3`})]})})}),t&&(0,o.jsxs)("div",{className:"ocr-res-actions",children:[(0,o.jsx)(S.iyF,{onClick:()=>{navigator.clipboard.writeText(t),A.oR.success("Text copied")},color:"#38507e",size:14}),i?(0,o.jsx)(S.$8F,{onClick:()=>{window.speechSynthesis.cancel(),c(!1)},color:"red",size:14}):(0,o.jsx)(N.IM0,{color:"#38507e",onClick:function(){const n=new SpeechSynthesisUtterance(t);n.lang="en-US",n.onstart=()=>c(!0),n.onend=()=>c(!1),window.speechSynthesis.speak(n),c(!0)},size:14}),(0,o.jsx)(j.WCW,{onClick:()=>U(this,void 0,void 0,(function*(){const n=new Blob([t],{type:"text/plain"}),e=URL.createObjectURL(n),r=document.createElement("a");r.href=e,r.download="QS-OCR.txt",r.click(),URL.revokeObjectURL(e)})),color:"#38507e",size:14}),(0,o.jsx)(C.Ifv,{onClick:function(){l((0,R.d)(t)),l((0,z.uu)("translateSection"))},color:"#38507e",size:14})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h2",{children:"OR"}),(0,o.jsx)("button",{onClick:p,className:"ocr-take-screenshot-btn",children:"Take a Screenshot"})]})]})]})}const P=()=>{const n=(0,w.wA)();return(0,a.useEffect)((()=>{n((0,k.S)())}),[]),(0,o.jsx)(E,{})}},3235:(n,e,r)=>{r.d(e,{A:()=>i});var o=r(1601),a=r.n(o),t=r(6314),s=r.n(t)()(a());s.push([n.id,".ocr-container {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    padding-top: 8px;\n    padding-right: 8px;\n    padding-bottom: 8px;\n    padding-left: 20px;\n    animation: ocr-slide-in 0.6s ease-in-out;\n}\n\n.ocr-interface {\n    display: flex;\n    width: 100%;\n    flex-direction: column;\n    gap: 10px;\n    align-items: center;\n}\n\n.ocr-req {\n    height: 30vh;\n    width: 100%;\n    border: 2px dashed #034AA6;\n    border-radius: 8px;\n}\n\n.ocr-res {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    width: 100%;\n    height: 45vh;\n    border-radius: 8px;\n    padding: 18px;\n    background-color: #f5f5f5;\n}\n\n.ocr-res.ocr-dark{\n    background-color: #222121;\n}\n\n.ocr-res > img {\n    width: 100%;\n    height: 85%;\n    border-radius: 8px;\n}\n\n.ocr-upload-icon-container {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n}\n\n#ocr-upload {\n    display: none;\n}\n\n.ocr-upload-icon {\n    cursor: pointer;\n}\n\n.ocr-upload-info {\n    color: #F27105;\n}\n\n.ocr-take-screenshot-btn {\n    border: 0;\n    padding: 12px;\n    border-radius: 8px;\n    cursor: pointer;\n    font-size: small;\n    color: white;\n    background: linear-gradient(to bottom, #00ccff, #034aa6);\n}\n\n.ocr-take-screenshot-btn:hover{\n    background: linear-gradient(to top, #00ccff, #034aa6);\n}\n\n.ocr-res-action-container {\n    display: flex;\n    align-items: center;\n    width: 100%;\n    height: auto;\n    justify-content: space-between;\n}\n\n.ocr-res-action-container .ocr-phase1 {\n    display: flex;\n    gap: 6px;\n    padding-top: 4px;\n    padding-bottom: 4px;\n}\n\n.ocr-phase1 .ocr-change-img {\n    border-radius: 4px;\n    background-color: #034AA6;\n    padding: 4px;\n    cursor: pointer;\n}\n\n.ocr-phase1 .ocr-extract-text {\n    border-radius: 4px;\n    border: 2px solid #034AA6;\n    padding: 4px;\n    cursor: pointer;\n}\n\n.ocr-res-action-container .ocr-delete {\n    border-radius: 4px;\n    background-color: #f5f5f5 ;\n    padding: 4px;\n    cursor: pointer;\n    border: none;\n}\n\n.ocr-result-container {\n    width: 100%;\n}\n\n.ocr-result-header {\n    width: 100%;\n}\n\n.ocr-response-text {\n    width: 100%;\n    padding-top: 4px;\n    padding-bottom: 4px;\n    padding-left: 8px;\n    padding-right: 8px;\n    height: 22vh;\n    overflow-y: auto;\n    background-color: #f5f5f5;\n    border-radius: 8px;\n}\n\n.ocr-response {\n    width: 100%;\n    height: 100%;\n    border: 0;\n    background-color: inherit;\n    outline: none;\n    resize: none;\n    color: black;\n}\n\n.ocr-response-dark {\n    color: white;\n}\n\n.ocr-response-text.ocr-dark {\n    background: #222121;\n}\n\n.ocr-res-actions {\n    display: flex;\n    gap: 8px;\n    align-items: center;\n    margin-top: 8px;\n}\n\n.ocr-res-actions > * {\n    cursor: pointer;\n}\n\n.ocr-response-loader {\n    display: flex;\n    padding: 12px;\n    gap: 4px;\n    width: 20%;\n    border-radius: 12px;\n}\n\n.ocr-dot {\n    width: 8px;\n    height: 8px;\n    border-radius: 9999px;\n    background-color: black;\n}\n\n.ocr-dot.ocr-dot-dark {\n    background-color: white;\n}\n\n.ocr-animate-wave-1 {\n    animation: wave 1.2s infinite ease-in-out;\n    animation-delay: 0s;\n}\n\n.ocr-animate-wave-2 {\n    animation: wave 1.2s infinite ease-in-out;\n    animation-delay: 0.2s;\n}\n\n.ocr-animate-wave-3 {\n    animation: wave 1.2s infinite ease-in-out;\n    animation-delay: 0.4s;\n}\n\n.ocr-response-loader-container {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n}\n\n@media (min-width: 768px){\n    .ocr-res, .ocr-result-container {\n        width: 60%;\n    }\n\n    .ocr-response-loader {\n        width: 12%;\n    }\n}\n\n@keyframes ocr-slide-in {\n    0% {\n        transform: translateX(-50%);\n        opacity: 1;\n    }\n\n    100% {\n        transform: translateX(0);\n        opacity: 1;\n    }\n}\n\n@keyframes wave {\n    0%,\n    80%,\n    100% {\n        transform: translateY(0);\n    }\n\n    40% {\n        transform: translateY(-5px);\n    }\n}",""]);const i=s}}]);