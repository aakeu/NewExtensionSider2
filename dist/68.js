"use strict";(self.webpackChunkquicksearch_ext_sider=self.webpackChunkquicksearch_ext_sider||[]).push([[68],{4068:(a,e,s)=>{s.r(e),s.d(e,{default:()=>x});var o=s(4848),n=s(6540),l=(s(648),s(2664)),i=s(8084),r=s(1468),d=s(3739),t=s(2665),c=s(6537),m=s(8089),g=s(8222),u=s(3476),p=s(915),h=s(9873),M=s(3160),w=function(a,e,s,o){return new(s||(s=Promise))((function(n,l){function i(a){try{d(o.next(a))}catch(a){l(a)}}function r(a){try{d(o.throw(a))}catch(a){l(a)}}function d(a){var e;a.done?n(a.value):(e=a.value,e instanceof s?e:new s((function(a){a(e)}))).then(i,r)}d((o=o.apply(a,e||[])).next())}))},f=function(a,e){var s={};for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&e.indexOf(o)<0&&(s[o]=a[o]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(a);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(a,o[n])&&(s[o[n]]=a[o[n]])}return s};const x=()=>{const[a,e]=(0,n.useState)(!0),[s,x]=(0,n.useState)(!0),[j,N]=(0,n.useState)({message:"",type:""}),{createNotification:y}=(0,t.h)(),[b,I]=(0,n.useState)(!1),v=(0,r.d4)((a=>a.theme.isDarkMode)),E=(0,r.d4)((a=>a.loginType.activeLoginType)),{isLoading:P,error:k}=(0,r.d4)((a=>a.auth)),C=(0,r.wA)();(0,n.useEffect)((()=>{var a,e;j.message&&(a=j.message,e=j.type,y({message:a,duration:5e3,background:"success"===e?"green":"red",color:"#fff"}),"signInModal"!==E&&"signUpModal"!==E&&"googleAuthentication"!==E||C((0,d.K)("")),"signUpModal"===E&&C((0,M.J9)(!0)))}),[j,y,E,C]);const O=l.Ik({email:l.Yj().required("This field is required").email("Invalid email format"),password:l.Yj().required("This field is required")}),S={email:"",password:"",remember:!1},D=l.Ik({name:l.Yj().required("This field is required").min(3,"Characters must be greater than 2").matches(/^[A-Za-z\s]+$/,"Only alphabetic characters and spaces are allowed"),email:l.Yj().required("This field is required").email("Invalid email format"),password:l.Yj().required("This field is required").matches(/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z0-9\s])/gi,"Must include uppercase, lowercase, number and special character").min(10,"characters must be greater than 9"),confirm_password:l.Yj().required("This field is required").oneOf([l.KR("password")],"Passwords must match")});return(0,o.jsxs)("div",{className:v?"loginModalDark":"loginModal",children:[(0,o.jsx)("img",{src:"images/close.svg",alt:"closeIcon",className:"loginModalCloseIcon",onClick:()=>C((0,d.K)(""))}),(0,o.jsxs)("div",{className:"loginModalContents",children:[(0,o.jsx)("h2",{className:v?"loginModalHeaderDark":"loginModalHeader",children:"signInModal"===E?"Welcome back!":"Create an account"}),(0,o.jsx)("span",{className:v?"loginModalSubHeaderDark":"loginModalSubHeader",children:"signInModal"===E?"Please login using your account":"Please fill the form to setup an account"}),(0,o.jsx)(i.l1,{initialValues:"signInModal"===E?S:"signUpModal"===E?{name:"",email:"",password:"",confirm_password:"",remember:!1}:S,validationSchema:"signInModal"===E?O:"signUpModal"===E?D:O,onSubmit:(a,e)=>w(void 0,[a,e],void 0,(function*(a,{setSubmitting:e}){try{if("signInModal"===E){const e=a,{remember:s}=e,o=f(e,["remember"]),n=yield C((0,c.Jv)(o)).unwrap();N({message:n.message||"Login successful!",type:"success"}),yield Promise.all([C((0,m.$q)()).unwrap(),C((0,h.F1)()).unwrap(),C((0,g.Sc)()).unwrap(),C((0,u.OL)()).unwrap(),C((0,p.Rc)()).unwrap()])}else if("signUpModal"===E){const e=a,{confirm_password:s,remember:o}=e,n=f(e,["confirm_password","remember"]),l=yield C((0,c.Hh)(n)).unwrap();N({message:l.message||"Sign-up successful! Please check your email.",type:"success"}),yield Promise.all([C((0,m.$q)()).unwrap(),C((0,h.F1)()).unwrap(),C((0,g.Sc)()).unwrap(),C((0,u.OL)()).unwrap(),C((0,p.Rc)()).unwrap()])}}catch(a){const e=a.message||k||"An unexpected error occurred. Please try again.";N({message:e,type:"error"})}finally{e(!1)}})),enableReinitialize:!0,children:({isSubmitting:n,isValid:l,dirty:r})=>(0,o.jsxs)(i.lV,{children:["signUpModal"===E&&(0,o.jsxs)("div",{className:"loginModalNameErrorHolder",children:[(0,o.jsx)(i.D0,{name:"name",children:({field:a,meta:e})=>(0,o.jsxs)("div",{className:"loginModalNameHolder",children:[(0,o.jsx)("span",{className:"loginModalNameText",children:"NAME"}),(0,o.jsx)("input",Object.assign({type:"text",placeholder:"Goodnews John",className:`${v?"loginModalNameInputDark":"loginModalNameInput"} ${e.error&&e.touched?"loginModalNameInputExtra":""}`,name:"name"},a,{disabled:n||P}))]})}),(0,o.jsx)(i.Kw,{name:"name",component:"div",className:v?"loginModalNameErrorDark":"loginModalNameError"})]}),(0,o.jsxs)("div",{className:"loginModalEmailErrorHolder",children:[(0,o.jsx)(i.D0,{name:"email",children:({field:a,meta:e})=>(0,o.jsxs)("div",{className:"loginModalEmailHolder",children:[(0,o.jsx)("span",{className:"loginModalEmailText",children:"EMAIL"}),(0,o.jsx)("input",Object.assign({type:"email",name:"email"},a,{placeholder:"goodnews@gmail.com",className:`${v?"loginModalEmailInputDark":"loginModalEmailInput"} ${e.error&&e.touched?"loginModalEmailInputExtra":""}`,disabled:n||P}))]})}),(0,o.jsx)(i.Kw,{name:"email",component:"div",className:v?"loginModalEmailErrorDark":"loginModalEmailError"})]}),(0,o.jsxs)("div",{className:"loginModalPasswordErrorHolder",children:[(0,o.jsx)(i.D0,{name:"password",children:({field:s,meta:l})=>(0,o.jsxs)("div",{className:"loginModalPasswordHolder",children:[(0,o.jsx)("span",{className:"loginModalPasswordText",children:"PASSWORD"}),a?(0,o.jsx)("input",Object.assign({type:"password",placeholder:"******",className:`${v?"loginModalPasswordInputDark":"loginModalPasswordInput"} ${l.error&&l.touched?"loginModalPasswordInputExtra":""}`,name:"password"},s,{disabled:n||P})):(0,o.jsx)("input",Object.assign({type:"text",placeholder:"password",className:`${v?"loginModalPasswordInputDark":"loginModalPasswordInput"} ${l.error&&l.touched?"loginModalPasswordInputExtra":""}`,name:"password"},s,{disabled:n||P})),(0,o.jsx)("img",{src:a?"images/openEye.svg":"images/closeEye.svg",alt:"close",className:"passwordEye",onClick:()=>e(!a)})]})}),(0,o.jsx)(i.Kw,{name:"password",component:"div",className:v?"loginModalPasswordErrorDark":"loginModalPasswordError"})]}),"signUpModal"===E&&(0,o.jsxs)("div",{className:"loginModalConfirmPasswordErrorHolder",children:[(0,o.jsx)(i.D0,{name:"confirm_password",children:({field:a,meta:e})=>(0,o.jsxs)("div",{className:"loginModalConfirmPasswordHolder",children:[(0,o.jsx)("span",{className:"loginModalConfirmPasswordText",children:"CONFIRM PASSWORD"}),s?(0,o.jsx)("input",Object.assign({type:"password",placeholder:"Confirm Password",className:`${v?"loginModalConfirmPasswordInputDark":"loginModalConfirmPasswordInput"} ${e.error&&e.touched?"loginModalConfirmPasswordInputExtra":""}`,name:"confirm_password"},a,{disabled:n||P})):(0,o.jsx)("input",Object.assign({type:"text",placeholder:"Confirm Password",className:`${v?"loginModalConfirmPasswordInputDark":"loginModalConfirmPasswordInput"} ${e.error&&e.touched?"loginModalConfirmPasswordInputExtra":""}`,name:"confirm_password"},a,{disabled:n||P})),(0,o.jsx)("img",{src:s?"images/openEye.svg":"images/closeEye.svg",alt:"close",className:"confirmPasswordEye",onClick:()=>x(!s)})]})}),(0,o.jsx)(i.Kw,{name:"confirm_password",component:"div",className:v?"loginModalConfirmPasswordErrorDark":"loginModalConfirmPasswordError"})]}),(0,o.jsx)("button",{type:"submit",disabled:!r||!l||n,className:r&&l&&!n?"loginModalSigninBtn":"loginModalSigninBtnExtra",children:n?"Submitting...":"signInModal"===E?"LOGIN":"CREATE AN ACCOUNT"})]})}),"signInModal"===E&&(0,o.jsxs)("div",{className:v?"loginModalForgotPassResetDark":"loginModalForgotPassReset",children:["Forgot your password?"," ",(0,o.jsx)("span",{className:"loginModalReset",children:"Reset Here"})]}),(0,o.jsx)("span",{className:v?"loginModalOrDark":"loginModalOr",children:"OR"}),(0,o.jsx)("span",{className:v?"loginModalSignWithGoogleDark":"loginModalSignWithGoogle",children:"signInModal"===E?"Signin with Google":"Signup with Google"}),(0,o.jsxs)("button",{className:(b?"loginModalSigninWithGoogleBtnAuth":"loginModalSigninWithGoogleBtn")+" ",onClick:a=>w(void 0,void 0,void 0,(function*(){a.preventDefault(),I(!0),(0,d.K)("googleAuthentication");try{const a=yield C((0,c.XL)()).unwrap();N({message:"Google login successful",type:"success"}),a.isNewUser&&C((0,M.BI)(!0))}catch(a){N({message:a.message||"Failed to log in with Google. Please try again.",type:"error"})}finally{I(!1)}})),disabled:b,children:[(0,o.jsx)("img",{src:"images/googleLogo.svg",alt:"googleIcon",className:"loginModalGoogleIcon"})," ","GOOGLE"]}),(0,o.jsx)("span",{className:"signInModal"===E?v?"loginModalNoAccountDark":"loginModalNoAccount":v?"loginModalAlreadyHaveAccountDark":"loginModalAlreadyHaveAccount",children:"signInModal"===E?"Donâ€™t have an account?":"Already have an account?"}),(0,o.jsx)("button",{className:"loginModalCreateAccount",onClick:"signInModal"===E?()=>C((0,d.K)("signUpModal")):"signUpModal"===E?()=>C((0,d.K)("signInModal")):()=>{},children:"signInModal"===E?"CREATE AN ACCOUNT":"LOGIN"})]})]})}}}]);