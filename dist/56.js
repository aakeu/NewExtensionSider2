"use strict";(self.webpackChunkquicksearch_ext_sider=self.webpackChunkquicksearch_ext_sider||[]).push([[56],{2056:(e,r,a)=>{a.r(r),a.d(r,{default:()=>F});var l=a(4848),t=a(6540),o=a(2664),s=a(8084),d=(a(7252),a(2665)),c=a(1468),n=a(3160),i=a(2202),m=a(9873),u=a(7313),h=a(8089);const F=()=>{const[e,r]=(0,t.useState)({message:"",type:""}),{createNotification:a}=(0,d.h)(),{createNormalFolder:F,selectedParentFolderName:f}=(0,c.d4)((e=>e.reusable)),{folders:N,successMessage:x,error:p}=(0,c.d4)((e=>e.folders)),{bookmarks:g}=(0,c.d4)((e=>e.bookmarks)),{isDarkMode:j}=(0,c.d4)((e=>e.theme)),b=(0,c.d4)((e=>e.sections.activeSection)),y=(0,c.wA)(),{collectionAncestorFolders:v}=(0,c.d4)((e=>e.folders));(0,t.useEffect)((()=>{var r,l;e.message&&(r=e.message,l=e.type,a({message:r||"",duration:5e3,background:"success"===l?"green":"red",color:"#fff"}),"success"===e.type&&y((0,n.NT)(!1)))}),[e]);const k=o.Ik({folderName:o.Yj().required("This field is required")}),S=o.Ik({parentFolderName:o.Yj().required("This field is required"),folderName:o.Yj().required("This field is required")}),C=o.Ik({folderName:o.Yj().required("This field is required")});return(0,t.useEffect)((()=>{if(x){const e=setTimeout((()=>{y((0,m.Sy)())}),3e3);return()=>clearTimeout(e)}}),[x,y]),(0,t.useEffect)((()=>{y((0,m.F1)())}),[y]),(0,t.useEffect)((()=>{y((0,m.ac)())}),[y]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:j?"createFolderModalDark":"createFolderModal",children:(0,l.jsxs)("div",{className:"createFolderModalContainer",children:[(0,l.jsx)("img",{src:"images/close.svg",alt:"close",className:"createFolderModalClose",onClick:()=>{y((0,n.NT)(!1))}}),(0,l.jsx)("h3",{className:j?"createFolderHeaderDark":"createFolderHeader",children:"dashboardCollectionSection"===b?"Create new folder":"Create a folder"}),"dashboardCollectionSection"!==b&&(0,l.jsx)("h4",{className:j?"createFolderWantSubfolderDark":"createFolderWantSubfolder",onClick:()=>{y((0,n.w7)(!F))},children:F?"Want to create subfolder?":"Want to create normal folder?"}),(0,l.jsx)(s.l1,{initialValues:"dashboardCollectionSection"===b||F?{folderName:""}:{parentFolderName:"",folderName:""},validationSchema:"dashboardCollectionSection"===b?C:F?k:S,onSubmit:(e,a)=>{return l=void 0,t=[e,a],s=function*(e,{setSubmitting:a}){const l=yield(0,i.ES)("allFolders");if(l.some((r=>r.name===e.folderName)))return r({message:`Folder with name ${e.folderName} already exists`,type:"error"}),void a(!1);let t={name:e.folderName,parentFolder:"dashboardCollectionSection"===b?v.length>0?v[v.length-1]:"/":F?"/":e.parentFolderName||"/"};console.log({createFolderData:t});try{yield y((0,m.vV)(t)).unwrap(),yield y((0,m.F1)()),yield y((0,h.$q)());const e=v[v.length-1],a=yield(0,u.Wi)(e,l),o=yield(0,u.c1)(e,l),s=yield(0,u.q0)(e,g);yield Promise.all([y((0,h.Se)(e)),y((0,m.GQ)(o)),y((0,m.LY)(a)),y((0,h.is)(s)),y((0,h.Id)()),y((0,h.w5)()),y((0,h.yU)()),y((0,m.ac)()),y((0,m.yc)()),y((0,m.TY)())]),(0,u.FX)(),r({message:"Folder created successfully",type:"success"})}catch(e){console.error("Create folder error:",e),r({message:e instanceof Error?e.message:"Failed to create folder. Please try again",type:"error"})}finally{a(!1)}},new((o=void 0)||(o=Promise))((function(e,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function d(e){try{c(s.throw(e))}catch(e){r(e)}}function c(r){var l;r.done?e(r.value):(l=r.value,l instanceof o?l:new o((function(e){e(l)}))).then(a,d)}c((s=s.apply(l,t||[])).next())}));var l,t,o,s},enableReinitialize:!0,children:({isSubmitting:e,isValid:r,dirty:a})=>(0,l.jsxs)(s.lV,{children:["dashboardCollectionSection"!==b&&!F&&(0,l.jsxs)("div",{className:"createFolderParentFolderNameErrorHolder",children:[(0,l.jsx)(s.D0,{name:"parentFolderName",children:({field:e,form:r,meta:a})=>(0,l.jsx)("div",{children:(0,l.jsxs)("select",Object.assign({},e,{value:f||"",className:`${j?"createFolderParentFolderSelectDark":"createFolderParentFolderSelect"}  ${a.error&&a.touched?"createFolderParentFolderSelectExtra":""}`,onChange:e=>{(e=>{y((0,n.hw)(e.target.value))})(e),r.setFieldValue("parentFolderName",e.target.value)},children:[(0,l.jsx)("option",{value:"",label:"Select Parent folder"}),N.map((e=>(0,l.jsx)("option",{value:e.name,label:e.name},e.id)))]}))})}),(0,l.jsx)(s.Kw,{name:"parentFolderName",component:"div",className:j?"createFolderParentFolderErrorDark":"createFolderParentFolderError"})]}),(0,l.jsxs)("div",{className:"createFolderNameErrorHolder",style:F?{}:{marginTop:"7px"},children:[(0,l.jsx)(s.D0,{name:"folderName",children:({field:e,_:r,meta:a})=>(0,l.jsxs)("div",{className:"createFolderNameHolder",children:["dashboardCollectionSection"!==b&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"createFolderNameText",children:"FOLDER NAME"}),(0,l.jsx)("input",Object.assign({type:"text",placeholder:"Enter folder name",className:`${j?"createFolderNameInputDark":"createFolderNameInput"} ${a.error&&a.touched?"createFolderNameInputExtra":""}`,name:"folderName"},e))]}),"dashboardCollectionSection"===b&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"createFolderNameHolderCollectionAncestor",children:[(0,l.jsx)("span",{className:"createFolderNameText",children:"Current Folder:"}),(0,l.jsx)("span",{className:j?"createFolderNameTextAncestorDark":"createFolderNameTextAncestor",children:v.length>0&&"/"===v[v.length-1]?"Home":v[v.length-1]})]}),(0,l.jsx)("input",Object.assign({type:"text",placeholder:"Enter folder name",className:`${j?"createFolderNameInputDark":"createFolderNameInput"} ${a.error&&a.touched?"createFolderNameInputExtra":""}`,name:"folderName"},e))]})]})}),(0,l.jsx)(s.Kw,{name:"folderName",component:"div",className:j?"createFolderNameErrorDark":"createFolderNameError"})]}),(0,l.jsx)("button",{type:"submit",disabled:!a||!r||e,className:a&&r&&!e?"createFolderBtn":"createFolderBtnExtra",children:e?"Submitting...":"Create"})]})})]})})})}}}]);